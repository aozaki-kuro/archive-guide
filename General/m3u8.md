## üî® Tool Preparation

- youtube-dl - general purpose video downloader [[Github](https://github.com/ytdl-org/youtube-dl)]
- ffmpeg [[Github](https://github.com/FFmpeg/FFmpeg)] [[Guide Here](http://blog.gregzaal.com/how-to-install-ffmpeg-on-windows/)]
- AtomicParsley [[Github](https://github.com/wez/atomicparsley)]

## üé™ Windows Environment Preparation

[![Windows10](https://img.shields.io/badge/Windows%2010-20H2-blue)](https://www.microsoft.com/en-us/software-download/windows10)

**‚Äª If you are working on a headless server like I do, please read the [advanced guide](/Advanced/server.md)**

First of all, you should setup a `PATH` folder to tell the Windows where to find the programs.

Run Command Prompt (cmd) as administrator. Then paste the following into the console

```powershell
setx /M PATH "%PATH%;<REPLACE THIS WITH THE PATH TO YOUR DIRECTORY>"
```
The `REPLACE THIS WITH THE PATH TO YOUR DIRECTORY` part should be the folder want to save the tools. In [this case](/assets/dir1.PNG) it sould be "J:\Youtube Downloading"

nce you are done, put the tools in the folder. Start cmd (doesn't not have to be as administrator) and run the commands `youtube-dl --help` or `streamlink -h` etc. If you see a giant block of text showing you the arguments, that means it's working.

Tips: 

> If you are not sure about how to download things on Github, just check the `releases` on the right of the page.
>
> Select the .exe file or the package having "windows" or "amd64" in it.

Another alternative way to install these are by using `pip3`. Just install `python` [link](https://www.python.org/) and type `pip3 install youtube-dl` and `pip3 install streamlink`.

## Usage

This part might be a little bit complicated, but you have to follow it carefully since the extracter of `youtube-dl` cannot do it automatically for you.

### üìù Extract the `.m3u8` link

First, go to the actual stream (where the video is played) and do the following steps:
- Pause the stream
- Make sure your timestamp is at 0:00
- Set the quality of the video to something you **do not** want to download

Your stream should look something like this:

![step1](/assets/vcst1.PNG)

Next, press F12 on your keyboard to bring up developer console for your browser. Click on the "Network" tab on the top.

![step2](/assets/networktab.PNG)

On the stream itself, pick the quality you want to download. **Switching qualities will cause the .m3u8 link to generate.** Don't play the stream yet. Your developer console should have generated a few lines in it. (Make sure the .m3u8 link is actually showing you the correct quality you're trying to download)

![step3](/assets/1080.PNG)

![generated](/assets/generate.PNG)

Right click the .m3u8 link, and select Copy>Copy URL. **This is the URL to the actual video source, so make sure you write it down somewhere**

![step4](/assets/networkf1112.PNG)

### üç™ Grab `cookies.txt`

Make sure you have the `cookies.txt` extension installed on your browser (link above). Now click on the plugin icon, and select "Current Site." You can save the `cookies.txt` file anywhere you like

![cookies](/assets/cookiestxt.PNG)

### Actually downloading the video

Now that you have the .m3u8 link and the `cookies.txt`, we are ready to use `youtube-dl` to download the video. 

Use this template to download the video. Replace the stuff in () with the appropriate content you got from earlier

```powershell
youtube-dl "the .m3u8 link" --cookies "path to cookies.txt" -o "path to where you want to save the video"
```

You can drag `youtube-dl.exe` and the `cookies.txt` file to your cmd to get the exact path easy

![cmd drag](/assets/clickdrag.PNG)

Your command should look something like this

![example](/assets/3171285238.PNG)

Now press enter and the download should start. Wait a bit and you should see the video in the path you specified above.

If you can't find the video, chances are it's probably in whatever folder this says

![cmddefault](/assets/cmddefault.PNG)

## üéØ Troubleshooting

If you are following the [YouTube guide](/General/YouTube.md) and enabled `aria2`, you might get an error message from `youtube-dl`. You should disable the `--external-downloader` option before downloading.
